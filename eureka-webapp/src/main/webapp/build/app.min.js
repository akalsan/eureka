"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}!function(){function e(e,n,t){e.app=n,e.user={isActivated:!1},e.conceptionYear="2012",e.currentYear=(new Date).getFullYear(),t.getUser().then(function(n){e.user=n})}function n(e,n,t){n.otherwise("/index"),e.state("index",{url:"/index",templateUrl:"eureka/views/main/main.html"}),t.theme("default").primaryPalette("blue-grey")}angular.module("eureka",["ui.router","ui.tree","angularValidator","ngMaterial","eureka.cohorts","eureka.phenotypes","eureka.register"]),angular.module("eureka").run(e),angular.module("eureka").config(n),e.$inject=["$rootScope","appProperties","users"],n.$inject=["$stateProvider","$urlRouterProvider","$mdThemingProvider"]}(),function(){function e(e){e.state("cohorts",{url:"/cohorts",templateUrl:"eureka/cohorts/views/main/main.html",controller:"cohorts.MainCtrl",controllerAs:"cohorts"}).state("newCohort",{url:"/cohorts/new",templateUrl:"eureka/cohorts/views/new/new.html",controller:"cohorts.NewCtrl",controllerAs:"newCohort"}).state("editCohort",{url:"/cohorts/:key",templateUrl:"eureka/cohorts/views/edit/edit.html",controller:"cohorts.EditCtrl",controllerAs:"editCohort"})}angular.module("eureka.cohorts",[]),angular.module("eureka.cohorts").config(e),e.$inject=["$stateProvider"]}(),function(){angular.module("eureka.phenotypes",[])}(),function(){function e(e){e.state("register",{url:"/register",templateUrl:"eureka/register/views/main/main.html",controller:"register.MainCtrl",controllerAs:"register"})}angular.module("eureka.register",[]),angular.module("eureka.register").config(e),e.$inject=["$stateProvider"]}(),angular.module("eureka").run(["$templateCache",function(e){e.put("eureka/views/main/main.html",'<div class="jumbotron">\n    <img id="logo" class="img-responsive" src="assets/images/logo.png"/>\n    <p class="vert-offset text-center">\n        Access to clinical data for quality improvement and research, simplified.\n    </p>\n</div>\n<div id="indexPanels">\n    <div class="container-fluid">\n        <div class="row">\n            <div class="alert alert-warning">NOTE: This demonstration web site is NOT suitable for\n                use with sensitive data including patient data that contains\n                identifiers.\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-6">\n                <div class="panel panel-info" ng-if="!user">\n                    <div class="panel-heading">First Steps</div>\n                    <div class="panel-body text-center">\n                        <div class="container-fluid">\n                            <div class="row" ng-switch="app.registrationEnabled">\n                                <div ng-switch-when="true">\n                                    <div class="col-xs-6">\n                                        <h4>Learn about Eureka!</h4>\n                                        <a ng-href="{{app.aiwSiteUrl}}/overview.html" target="_blank"\n                                           class="btn btn-primary btn-lg">\n                                            About Eureka!\n                                        </a>\n                                    </div>\n                                    <div class="col-xs-6">\n                                        <h4>Get an account</h4>\n                                        <a href="#/register"\n                                           class="btn btn-primary btn-lg">\n                                            Register\n                                        </a>\n                                    </div>\n                                </div>\n                                <div ng-switch-default>\n                                    <div class="col-xs-12">\n                                        <h4>Learn about Eureka!</h4>\n                                        <a ng-href="{{app.aiwSiteUrl}}/overview.html" target="_blank"\n                                           class="btn btn-primary btn-lg">\n                                            About Eureka!\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="panel panel-info" ng-if="user">\n                    <div class="panel-heading">Want to learn more?</div>\n                    <div class="panel-body text-center">\n                        <div class="container-fluid">\n                            <div class="row">\n                                <div class="col-xs-12">\n                                    <h4>Learn more about Eureka!</h4>\n                                    <a ng-href="{{app.aiwSiteUrl}}/overview.html" target="_blank"\n                                       class="btn btn-primary btn-lg">\n                                        About Eureka!\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-6">\n                <div class="panel panel-info">\n                    <div class="panel-heading">Want to deploy Eureka! at your institution or lab?</div>\n                    <div class="panel-body text-center">\n                        <div class="container-fluid">\n                            <div class="row">\n                                <div class="col-xs-6">\n                                    <h4>Get your own copy</h4>\n                                    <a ng-href="{{app.aiwSiteUrl}}/get-it.html" target="_blank"\n                                       class="btn btn-primary btn-lg">\n                                        Download Eureka!\n                                    </a>\n                                </div>\n                                <div class="col-xs-6">\n                                    <h4>Contact us for help</h4>\n                                    <a ng-href="{{app.aiwSiteUrl}}/contact.html" target="_blank"\n                                       class="btn btn-primary btn-lg">\n                                        Contact Us\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-md-6">\n                <div class="panel panel-info">\n                    <div class="panel-heading">News</div>\n                    <div class="panel-body" id="versionHistory">\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-6">\n                <div class="panel panel-info">\n                    <div class="panel-heading">Funding</div>\n                    <div class="panel-body text-center">\n                        <p>The software powering this site has been supported in part by <span id="support"></span></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div id="versionHistory"></div>\n    </div>\n\n</div>\n<script type="text/javascript"\n        src="assets/js/eureka.util.js"></script>\n<script type="text/javascript"\n        src="assets/js/eureka.index.js"></script>\n<script type="text/javascript">\n    $(document).ready(function () {\n        eureka.index.setup("/eureka-webapp");\n        eureka.index.writeSupport();\n        eureka.index.writeVersionHistory();\n    });\n</script>'),e.put("eureka/cohorts/views/edit/edit.html",'<h3>Cohort Editor</h3>\n<p>\n    Select the system and user-defined elements from the ontology that will define the patient cohort.\n</p>\n<div class = "row" >\n    <div class="col-xs-4">\n        <ul class="nav nav-tabs">\n            <li class = "active">\n                <a href = "#systemElems" data-toggle="tab">System</a>\n            </li>\n            <li>\n                <a href="#userElems" data-toggle="tab">User</a>\n            </li>\n        </ul>\n        <div id="treeContent" class="tab-content proposition-tree">\n            <div id="systemElems" class="tab-pane fade active in">\n                <jstree\n                        tree-url="protected/systemlist"\n                        tree-search="protected/jstree3_searchsystemlist"\n                        search-update-div="#searchUpdateDiv"\n                        search-validation-modal="#searchValidationModal"\n                        search-no-results-modal="#searchNoResultsModal"\n                        tree-css-url="assets/css/jstree-themes/default/style.css"\n                        />\n                <div id="searchUpdateDiv" class="searchUpdateMessage"></div>\n            </div>\n            <div id="userElems" class="tab-pane fade">\n                <div id="userTree"></div>\n            </div>\n        </div>\n    </div>\n    <div id="definitionContainer" class="col-xs-8">\n        <form id="categorizationForm" class="vert-offset" role="form">\n            <div class="form-group">\n                <label for="patCohortDefName" class="control-label">Name</label>\n                <input type="text" id="patCohortDefName" ng-model="editCohort.cohortDestination.name"\n                       class="form-control"/>\n            </div>\n            <div class="form-group">\n                <label for="patCohortDescription" class="control-label">Description</label>\n                <textarea id="patCohortDescription" class="form-control" ng-model="editCohort.cohortDestination.description"></textarea>\n            </div>\n            <div class="form-group">\n                <label for="patCohortDefinition" class="control-label">Members</label>\n                <div id="patCohortDefinition"\n                     class="jstree-drop tree-drop tree-drop-multiple"\n                     title="Drop the system and/or user-defined data element members that define your patient cohort in here">\n\n                    <ul class="sortable"\n                        data-drop-type="multiple"\n                        data-proptype="empty"\n                        ng-repeat="phenotype in editCohort.cohortDestination.phenotypes"\n                        phenotype-editor="phenotype"\n                            />\n\n                </div>\n            </div>\n            <div class="form-group text-center vert-offset">\n                <button id="savePropositionButton" type="button" class="btn btn-primary">Save</button>\n            </div>\n        </form>\n    </div>\n</div>\n<div id="deleteModal" class="modal fade" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="deleteModalLabel" class="modal-title">Delete Element</h4>\n            </div>\n            <div id="deleteContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button id="deleteButton" type="button" class="btn btn-primary">Delete</button>\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="replaceModal" class="modal fade" role="dialog" aria-labelledby="replaceModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="replaceModalLabel" class="modal-title">Replace Element</h4>\n            </div>\n            <div id="replaceContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button id="replaceButton" type="button" class="btn btn-primary">Replace</button>\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="errorModal" class="modal fade" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="errorModalLabel" class="modal-title">Error</h4>\n            </div>\n            <div id="errorContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="searchModal" class="modal fade" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="searchModalLabel" class="modal-title">\n                    Broad Search Update\n                </h4>\n            </div>\n            <div id="searchContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="searchValidationModal" class="modal fade" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="searchModalLabel" class="modal-title">\n                    Search String Validation Failed\n                </h4>\n            </div>\n            <div id="searchContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="searchNoResultsModal" class="modal fade" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="searchModalLabel" class="modal-title">\n                    No Search Results\n                </h4>\n            </div>\n            <div id="searchContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n'),e.put("eureka/cohorts/views/new/new.html",'<h3>Cohort Editor</h3>\n<p>\n    Select the system and user-defined elements from the ontology that will define the patient cohort.\n</p>\n<div class = "row" >\n    <div class="col-xs-4">\n\n        <ul class="nav nav-tabs">\n            <li ng-class="{active: newCohort.activeTab == 1}">\n                <!--<a href = "#systemElems" data-toggle="tab">System</a>-->\n                <a href ng-click="newCohort.activeTab = 1" >System</a>\n            </li>\n            <li ng-class="{active: newCohort.activeTab == 2}">\n                <a href ng-click="newCohort.activeTab = 2" >User</a>\n            </li>\n        </ul>\n        <div id="treeContent" ng-init="newCohort.activeTab = 1" class="tab-content proposition-tree">\n            <!--<div id="systemElems" class="tab-pane fade active in" ng-show="tab.isSet(1)">-->\n            <div id="systemElems" ng-show="newCohort.activeTab == 1">\n                <jstree\n                        tree-url="/eureka-webapp/protected/systemlist"\n                        tree-search="/eureka-webapp/protected/jstree3_searchsystemlist"\n                        search-update-div="#searchUpdateDiv"\n                        search-validation-modal="#searchValidationModal"\n                        search-no-results-modal="#searchNoResultsModal"\n                        tree-css-url="assets/css/jstree-themes/default/style.css"\n                        />\n                <div id="searchUpdateDiv" class="searchUpdateMessage"></div>\n            </div>\n            <!--<div id="userElems" class="tab-pane fade" ng-show="tab.isSet(2)">-->\n            <div id="userElems" ng-show="newCohort.activeTab == 2">\n                <div id="userTree"></div>\n            </div>\n        </div>\n\n        <!-- begin angular-ui-tree -->\n        Angular UI tree\n        <md-progress-circular md-mode="indeterminate" ng-if="newCohort.loading"></md-progress-circular>\n        <div ui-tree data-drag-enabled="false">\n            <ol ui-tree-nodes="" ng-model="newCohort.dummyTreeData" id="tree-root">\n                <li ng-repeat="node in newCohort.dummyTreeData" ui-tree-node ng-include="\'nodes_renderer.html\'" collapsed="true"></li>\n            </ol>\n        </div>\n        <!-- Nested node template -->\n        <script type="text/ng-template" id="nodes_renderer.html">\n            <div ui-tree-handle ng-click="toggle(this); newCohort.toggleNode(node)">\n                <i class="fa" ng-if="node.children" ng-class="{\n                    \'fa-plus-square-o\': collapsed,\n                    \'fa-minus-square-o\': !collapsed\n                }"></i>\n                {{node.text}}\n            </div>\n            <md-progress-linear style="margin:5px 0;" md-mode="indeterminate" ng-if="node.loading"></md-progress-linear>\n            <ol ui-tree-nodes="" ng-class="{ \'hidden\': collapsed }" ng-model="node.nodes">\n                <li ng-repeat="node in node.nodes" ui-tree-node ng-include="\'nodes_renderer.html\'" collapsed="true">\n                </li>\n            </ol>\n        </script>\n        <!--end angular-ui-tree  -->\n\n    </div>\n    <div id="definitionContainer" class="col-xs-8">\n        <form id="categorizationForm" class="vert-offset" role="form">\n            <div class="form-group">\n                <label for="patCohortDefName" class="control-label">Name</label>\n                <input type="text" id="patCohortDefName" ng-model="newCohort.cohortDestination.name"\n                       class="form-control"/>\n            </div>\n            <div class="form-group">\n                <label for="patCohortDescription" class="control-label">Description</label>\n                <textarea id="patCohortDescription" class="form-control" ng-model="newCohort.cohortDestination.description"></textarea>\n            </div>\n            <div class="form-group">\n                <label for="patCohortDefinition" class="control-label">Members</label>\n                <div id="patCohortDefinition"\n                     class="jstree-drop tree-drop tree-drop-multiple"\n                     title="Drop the system and/or user-defined data element members that define your patient cohort in here">\n                    <ul class="sortable" data-drop-type="multiple" data-proptype="empty">\n                    </ul>\n                </div>\n            </div>\n            <div class="form-group text-center vert-offset">\n                <button id="savePropositionButton" type="button" class="btn btn-primary">Save</button>\n            </div>\n        </form>\n    </div>\n</div>\n<div id="deleteModal" class="modal fade" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="deleteModalLabel" class="modal-title">Delete Element</h4>\n            </div>\n            <div id="deleteContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button id="deleteButton" type="button" class="btn btn-primary">Delete</button>\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="replaceModal" class="modal fade" role="dialog" aria-labelledby="replaceModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="replaceModalLabel" class="modal-title">Replace Element</h4>\n            </div>\n            <div id="replaceContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button id="replaceButton" type="button" class="btn btn-primary">Replace</button>\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="errorModal" class="modal fade" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="errorModalLabel" class="modal-title">Error</h4>\n            </div>\n            <div id="errorContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="searchModal" class="modal fade" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="searchModalLabel" class="modal-title">\n                    Broad Search Update\n                </h4>\n            </div>\n            <div id="searchContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="searchValidationModal" class="modal fade" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="searchModalLabel" class="modal-title">\n                    Search String Validation Failed\n                </h4>\n            </div>\n            <div id="searchContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="searchNoResultsModal" class="modal fade" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="searchModalLabel" class="modal-title">\n                    No Search Results\n                </h4>\n            </div>\n            <div id="searchContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n<script language="JavaScript">\n    eureka.editor.setup(null,\'#userTree\', \'#definitionContainer\', \'#savePropositionButton\');\n</script>\n\n'),e.put("eureka/cohorts/views/main/main.html",'<div class="row">\n    <div class="col-sm-12">\n        <h3>Cohorts</h3>\n\n        <p>Define a cohort to identify the patient population in your datasets.\n        </p>\n        <a ui-sref="newCohort" class="btn btn-primary"><span\n                class="glyphicon glyphicon-plus-sign"></span>Define New Cohort\n        </a>\n        <table class="table table-responsive vert-offset">\n            <tr>\n                <th>Action</th>\n                <th>Name</th>\n                <th>Description</th>\n                <th>Created Date</th>\n                <th>Last Modified</th>\n            </tr>\n            <tr ng-repeat="cohortDestination in cohorts.list">\n                <td>\n                    <a ui-sref="editCohort({key: cohortDestination.name})" title="Edit">\n                        <span class="glyphicon glyphicon-pencil edit-icon" title="Edit"></span>\n                    </a>\n                    <span class="glyphicon glyphicon-remove delete-icon" title="Delete" ng-click="remove(cohortDestination.name)"></span>\n                </td>\n                <td>{{ cohortDestination.name }}</td>\n                <td>{{ cohortDestination.description }}</td>\n                <td>{{ cohortDestination.created_at | date : shortDate }}</td>\n                <td>{{ cohortDestination.updated_at | date : shortDate }}</td>\n            </tr>\n        </table>\n    </div>\n</div>\n<div id="deleteModal" class="modal fade" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="deleteModalLabel" class="modal-title">\n                    Delete Element\n                </h4>\n            </div>\n            <div id="deleteContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button id="deleteButton" type="button" class="btn btn-primary">Delete</button>\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="errorModal" class="modal fade" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="errorModalLabel" class="modal-title">\n                    Error\n                </h4>\n            </div>\n            <div id="errorContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<script language="JavaScript">\n\n    $(\'span.delete-icon\').on(\'click\', function () {\n        var $tr = $(this).closest(\'tr\');\n        var displayName = $tr.data(\'display-name\');\n        var key = $tr.data(\'key\');\n        var dialog = $(\'#deleteModal\');\n        $(dialog).find(\'#deleteContent\').html(\'Are you sure you want to remove cohort &quot;\' + displayName.trim() + \'&quot;?\');\n        $(dialog).find(\'#deleteButton\').on(\'click\', function (e) {\n            $(dialog).modal(\'hide\');\n            $.ajax({\n                type: "DELETE",\n                //url: \'deletecohort?key=\' + encodeURIComponent(key),\n                url: \'/eureka-webapp/proxy-resource/destinations/\' + encodeURIComponent(key),\n                success: function (data) {\n                    window.location.href = \'#/cohort_home\'\n                },\n                error: function (data, statusCode, errorThrown) {\n                    var content = \'Error while deleting &quot;\' + displayName.trim() + \'&quot;. \' + data.responseText + \'. Status Code: \' + statusCode;\n                    $(\'#errorModal\').find(\'#errorContent\').html(content);\n                    $(\'#errorModal\').modal(\'show\');\n                    if (errorThrown != null) {\n                        console.log(errorThrown);\n                    }\n                }\n            });\n        });\n        $(dialog).modal("show");\n    });\n</script>'),e.put("eureka/phenotypes/directives/phenotype-editor/phenotype-editor.html",'<li\n    data-key="{{item.dataElementKey}}"\n    data-desc="{{item.dataElementDisplayName}}" data-type="{{item.type}}"\n    data-subtype="{{item.type == \'CATEGORIZATION\' ? item.categoricalType : \'\'}}">\n\n            <span class="glyphicon glyphicon-remove delete-icon"\n                  title="Remove this phenotype from the category"></span>\n\n    <span>{{item.dataElementDisplayName}} ({{item.dataElementKey}})</span>\n</li>'),e.put("eureka/phenotypes/views/main/main.html",'<div class="row">\n    <div class="col-sm-12">\n        <h3>Phenotype Editor</h3>\n        <p>Specify the phenotypes that you want to compute in your\n            datasets below.\n            Phenotypes are patient features inferred from sequence,\n            frequency and other temporal patterns in the events and\n            observations in your dataset.\n            These features are computed as intervals with a start time\n            and a stop time representing when they are present.\n        </p>\n\n        <div id="dialog" title="Delete Data Element"></div>\n        <div class="btn-group">\n            <div class="btn-group">\n                <button id="typeDropdown" class="btn btn-primary" data-toggle="dropdown">\n                    <span class="glyphicon glyphicon-plus-sign"></span>\n                    Create New Element\n                </button>\n                <ul class="dropdown-menu" role="menu" aria-labelledby="typeDropdown">\n                    <li>\n                        <a href="editprop?type=categorization">\n                            <dt>\n                                Categorization\n                            </dt>\n                            <dd>\n                               {{messages.CATEGORIZATION.description}}\n                            </dd>\n                        </a>\n                    </li>\n                    <li>\n                        <a href="/editprop?type=sequence">\n                            <dt>\n                                Sequence\n                            </dt>\n                            <dd>\n                                {{messages.SEQUENCE.description}}\n                            </dd>\n                        </a>\n                    </li>\n                    <li>\n                        <a href="/editprop?type=frequency">\n                            <dt>\n                                Frequency\n                            </dt>\n                            <dd>\n                                {{messages.FREQUENCY.description}}\n                            </dd>\n                        </a>\n                    </li>\n                    <li>\n                        <a href="/editprop?type=value_threshold">\n                            <dt>\n                                Value Threshold\n                            </dt>\n                            <dd>\n                                {{messages.VALUE_THRESHOLD.description}}\n                            </dd>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <a class="btn btn-default" href="#"\n               target="eureka-help">\n                <span class="glyphicon glyphicon-question-sign"></span>\n            </a>\n        </div>\n        <table class="table table-responsive vert-offset">\n            <tr>\n                <th>Action</th>\n                <th>Name</th>\n                <th>Description</th>\n                <th>Type</th>\n                <th>Created Date</th>\n                <th>Last Modified</th>\n            </tr>\n                <tr ng-repeat="prop in phenotypes.props">\n                    <td>\n                        <a href="#" title="Edit">\n                            <span class="glyphicon glyphicon-pencil edit-icon" title="Edit"></span>\n                        </a>\n                        <span class="glyphicon glyphicon-remove delete-icon" title="Delete"></span>\n                    </td>\n                    <td>{{prop.displayName}}</td>\n                    <td>{{prop.description}}</td>\n                    <td>{{prop.type}}</td>\n                    <td>{{prop.created | date : shortDate}}</td>\n                    <td>{{prop.lastModified | date : shortDate}}</td>\n                </tr>\n        </table>\n    </div>\n</div>\n<div id="deleteModal" class="modal fade" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="deleteModalLabel" class="modal-title">\n                    Delete Element\n                </h4>\n            </div>\n            <div id="deleteContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button id="deleteButton" type="button" class="btn btn-primary">Delete</button>\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<div id="errorModal" class="modal fade" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n                <h4 id="errorModalLabel" class="modal-title">\n                    Error\n                </h4>\n            </div>\n            <div id="errorContent" class="modal-body">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>\n            </div>\n        </div>\n    </div>\n</div>\n<script language="JavaScript">\n\n    $(\'span.delete-icon\').on(\'click\', function () {\n        var $tr = $(this).closest(\'tr\');\n        var displayName = $tr.data(\'display-name\');\n        var key = $tr.data(\'key\');\n        var dialog = $(\'#deleteModal\');\n        $(dialog).find(\'#deleteContent\').html(\'Are you sure you want to remove data element &quot;\' + displayName.trim() + \'&quot;?\');\n        $(dialog).find(\'#deleteButton\').on(\'click\', function (e) {\n            $(dialog).modal(\'hide\');\n            $.ajax({\n                type: "POST",\n                url: \'deleteprop?key=\' + encodeURIComponent(key),\n                success: function (data) {\n                    window.location.href = \'editorhome\'\n                },\n                error: function (data, statusCode, errorThrown) {\n                    var content = \'Error while deleting &quot;\' + displayName.trim() + \'&quot;. \' + data.responseText + \'. Status Code: \' + statusCode;\n                    $(\'#errorModal\').find(\'#errorContent\').html(content);\n                    $(\'#errorModal\').modal(\'show\');\n                    if (errorThrown != null) {\n                        console.log(errorThrown);\n                    }\n                }\n            });\n        });\n        $(dialog).modal("show");\n    });\n</script>'),
e.put("eureka/register/views/main/main.html",'<div ng-if="!register.showSuccess">\n    <div class="alert alert-danger" role="alert" ng-if="register.errorMsg">\n        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>\n        <span class="sr-only">Error:</span>\n        {{ register.errorMsg }}\n    </div>\n    <form angular-validator-submit="register.addNewAccount(newAcct)" id="registerForm" name="registerForm" novalidate angular-validator>\n       <div class="row">\n           <div class="col-sm-6">\n               <div class="form-group">\n                   <label for="firstName" class="control-label">First Name</label>\n                   <input id="firstName"\n                          name="firstName"\n                          type="text"\n                          class="form-control"\n                          ng-model="newAcct.firstName"\n                          required />\n                   <span class="help-block default-hidden"></span>\n               </div>\n           </div>\n       </div>\n       <div class="row">\n           <div class="col-sm-6">\n               <div class="form-group">\n                   <label for="lastName" class="control-label">Last Name</label>\n                   <input id="lastName"\n                          name="lastName"\n                          type="text"\n                          class="form-control"\n                          ng-model="newAcct.lastName"\n                          required />\n                   <span class="help-block default-hidden"></span>\n               </div>\n           </div>\n       </div>\n       <div class="row">\n           <div class="col-sm-6">\n               <div class="form-group">\n                   <label for="organization" class="control-label">Organization</label>\n                   <input id="organization"\n                          name="organization"\n                          type="text"\n                          class="form-control"\n                          ng-model="newAcct.organization"\n                          required />\n                   <span class="help-block default-hidden"></span>\n               </div>\n           </div>\n       </div>\n       <div class="row">\n           <div class="col-sm-6">\n               <div class="form-group">\n                   <label for="title" class="control-label">Title</label>\n                   <input id="title"\n                          name="title"\n                          type="text"\n                          class="form-control"\n                          ng-model="newAcct.title"\n                          required />\n                   <span class="help-block default-hidden"></span>\n               </div>\n           </div>\n       </div>\n       <div class="row">\n           <div class="col-sm-6">\n               <div class="form-group">\n                   <label for="department" class="control-label">Department</label>\n                   <input id="department"\n                          name="department"\n                          type="text"\n                          class="form-control"\n                          ng-model="newAcct.department"\n                          required />\n                   <span class="help-block default-hidden"></span>\n               </div>\n           </div>\n       </div>\n       <div class="row">\n           <div class="col-sm-6">\n               <div class="form-group">\n                   <label for="email" class="control-label">Email Address</label>\n                   <input id="email"\n                          name="email"\n                          type="email"\n                          class="form-control"\n                          ng-model="newAcct.email"\n                          required />\n                   <span class="help-block default-hidden"></span>\n               </div>\n           </div>\n       </div>\n       <div class="row">\n           <div class="col-sm-6">\n               <div class="form-group">\n                   <label for="verifyEmail" class="control-label">Verify Email Address</label>\n                   <input id="verifyEmail"\n                          name="verifyEmail"\n                          type="email"\n                          class="form-control"\n                          ng-model="newAcct.verifyEmail"\n                          required />\n                   <span class="help-block default-hidden"></span>\n               </div>\n           </div>\n       </div>\n           <div class="row">\n               <div class="col-sm-6">\n                   <div class="form-group">\n                       <label for="password" class="control-label">Password</label>\n                       <input id="password"\n                              name="password"\n                              type="password"\n                              class="form-control"\n                              ng-pattern="/(^.*(?=.*\\d)(?=.*[a-z]).*$)/"\n                              ng-minlength="8"\n                              ng-model="newAcct.password"\n                              required />\n                       <span class="help-block default-hidden"></span>\n                   </div>\n               </div>\n           </div>\n           <div class="row">\n               <div class="col-sm-6">\n                   <div class="form-group">\n                       <label for="verifyPassword" class="control-label">Confirm Password</label>\n                       <input id="verifyPassword"\n                              name="verifyPassword"\n                              type="password"\n                              class="form-control"\n                              ng-model="newAcct.verifyPassword"\n                              validator = "newAcct.password == newAcct.verifyPassword"\n                              required />\n                       <span class="help-block default-hidden"></span>\n                   </div>\n               </div>\n           </div>\n           <div class="row">\n               <div class="col-sm-6">\n                   <div class="form-group">\n                       <label for="agreement" class="control-label">\n                           <input type="checkbox"\n                                  name="agreement"\n                                  id="agreement"\n                                  class="checkbox checkbox-inline"\n                                  ng-model="agreement"\n                                  required />\n                           I agree to the <a id="agreementAnchor" href="#">End User Agreement</a>\n                       </label>\n                       <span class="help-block default-hidden"></span>\n                   </div>\n               </div>\n           </div>\n           <div class="row">\n               <div class="col-sm-12">\n                   <div class="form-group">\n                       *Passwords must be at least 8 characters and contain at least\n                       one letter & digit\n                   </div>\n               </div>\n           </div>\n       <div class="row">\n           <div id="passwordChangeFailure" class="default-hidden help-block has-error">\n               <div id="passwordErrorMessage"></div>\n           </div>\n       </div>\n        <button id="submit" type="submit"\n                class="btn btn-success"\n                >\n            Submit\n        </button>\n    </form>\n</div>\n\n<div ng-if="register.showSuccess">\n    <h3>\n        Your registration is now verified. Your account will be activated within the next 3 business days.\n        You will be notified by e-mail when activation has occurred.\n    </h3>\n</div>')}]),function(){var e={demoMode:!0,ephiProhibited:!0,registrationEnabled:!0,aiwSiteUrl:"http://aiw.sourceforge.net",organizationName:"Emory University",apiEndpoint:"/eureka-services/api/protected",dataEndpoint:"/eureka-webapp/protected"};angular.module("eureka").value("appProperties",e)}(),function(){function e(e){return{scope:{data:"="},template:'<div id="filter">Tree did not load.</div>',restrict:"E",controller:function(e,n,t,a){},link:function(n,t,a){self.droppedElements={},self.propId=null,self.propType=null,self.propSubType=null;var o=null,i=a.searchUpdateDiv,r=a.searchModal,s=a.searchValidationModal,d=a.searchNoResultsModal,l=a.treeCssUrl;$(t).jstree({core:{data:{url:a.treeUrl,dataType:"json",data:function(e){return{key:"#"===e.id?"root":e.id}}}},plugins:["themes","json_data","ui","crrm","dnd","search"]}),$(t).before($('<form id="search"><span></span><div class="input-group"><input id="searchText" class="form-control" type="text" /><div class="input-group-btn"><input id="searchTree" class="btn btn-default" type=submit value="search" /><input class="btn btn-default" type="reset" value="X" /></div></div></form>').bind({reset:function(e){$(t).jstree("clear_search"),$(t).jstree(!0).settings.core.data=o,$(t).jstree(!0).refresh(),$("#search span").html("")},submit:function(e){$(t).jstree("clear_search");var n=$('#search input[type="text"]').val();if(o=$(t).jstree(!0).settings.core.data,""!==n&&n.length>=4){$(t).hide();var c=$(i);c.text("Search is in progress. Please wait..."),c.show(),$(t).jstree("destroy"),$(t).jstree({core:{data:{url:function(e){return"#"===e.id?a.treeSearch+"?str="+n:a.treeUrl},dataType:"json",data:function(e){return{key:"#"===e.id?"root":e.id}}}},themes:{name:"default",theme:"default",url:l},plugins:["themes","json_data","ui","crrm","dnd","search"]}).bind("loaded.jstree",function(e,n){if(0===n.instance._cnt){console.log("empty");var a=$(d);a.find("#searchContent").html("There are no entries in our\n                                            database that matched your search criteria."),a.modal("toggle"),a.hide(),$(t).jstree("clear_search"),$(t).jstree(!0).settings.core.data=o,$(t).jstree(!0).refresh(),$("#searchText").val(""),$(t).show(),a=$(i),a.hide()}else if(n.instance._cnt>200){var s=$(r);s.find("#searchContent").html("The number of search results\n                                                exceeded the maximum limit and all results might not be displayed.\n                                                Please give a more specific search query to see all results."),s.modal("toggle"),s.hide(),$(t).jstree("clear_search"),$(t).jstree(!0).settings.core.data=o,$(t).jstree(!0).refresh(),$("#searchText").val(""),$(t).show(),s=$(i),s.hide()}}),c.hide(),$(t).show()}else if(n.length<4){var u=$(s);u.find("#searchContent").html("Please enter a search value with\n                                        length greater than 3."),u.modal("toggle"),$(t).show()}return!1}})),$(document).on("dnd_move.vakata",function(e,n){var t=$(n.event.target);t.closest(".jstree").length||(t.closest(".tree-drop").length?n.helper.find(".jstree-icon").removeClass("jstree-er").addClass("jstree-ok"):n.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"))}),$(document).on("dnd_stop.vakata",function(e,n){self.dropFinishCallback(n)}),self.attachClearModalHandlers=function(){var e=$("#deleteModal");if(e){var n=$(e).find("#deleteButton");$(e).on("hidden.bs.modal",function(e){n.off("click")})}var t=$("#replaceModal");if(t){var a=$(t).find("#replaceButton");$(t).on("hidden.bs.modal",function(e){a.off("click")})}},self.dropFinishCallback=function(n){var t=n.event.target;t=$(t).closest("#patCohortDefinition");var a=n.data.origin.get_node(n.data.obj[0].id).original.text;if(e.idIsNotInList(t,n.data.obj[0].id)){var o=$(t).find("ul.sortable"),i=n.data.obj[0].id,r=$("<li></li>").attr("data-space",n.data.origin.get_node(i).original.attr["data-space"]).attr("data-desc",a).attr("data-type",n.data.origin.get_node(i).original.attr["data-type"]).attr("data-subtype",n.data.origin.get_node(i).original.attr["data-subtype"]||"").attr("data-key",n.data.origin.get_node(i).original.attr["data-proposition"]||n.data.origin.get_node(i).original.attr["data-key"]);if("multiple"===$(o).data("drop-type")&&"empty"!==$(o).data("proptype")){if($(o).data("proptype")!==$(r).data("type"))return}else{var s=$(r).data("type");$(o).data("proptype",s)}if("single"===$(o).data("drop-type")&&$(o).find("li").length>0){var d=$(o).find("li"),l=$("#replaceModal");$(l).find("#replaceContent").html("Are you sure you want to replace data element &quot;"+d.text().trim()+"&quot;?"),$(l).find("#replaceButton").on("click",function(t){e.deleteItem(d,$(o),0),e.addNewItemToList(n,$(o),r),$(l).modal("hide")}),$(l).modal("show")}else e.addNewItemToList(n,o,r)}}}}}angular.module("eureka").directive("jstree",e),e.$inject=["listDragAndDropService"]}(),function(){function e(){function e(e,n){for(var t=e,a=0;a<n.length&&(t=t[n[a]],t);a++);return t}function n(e,n,t){for(var a=e,o=0;o<n.length-1;o++){var i=a[n[o]];i||(i={},a[n[o]]=i),a=i}a[n[n.length-1]]=t}function t(e,n){for(var t=e,a=0;a<n.length-1&&(t=t[n[a]],null!==t);a++);delete t[n[n.length-1]]}function a(e){var n=0;for(var t in e)e.hasOwnProperty(t)&&n++;return n}function o(t,o){function i(e,n){var a=$(n).find("span.desc"),o=$(t).data("desc")+" ["+$(f).data("count")+"]";$(a).text(o)}var r=$(t).data("key"),s=$(o).data("count"),d=[self.propType,r,"sources",s],l=[self.propType,r,"definition"],c=e(self.droppedElements,l);if(n(self.droppedElements,d,o),!c){var u=["key","desc","type","subtype","space"];c={},$.each(u,function(e,n){c[n]=$(t).data(n)}),n(self.droppedElements,l,c)}var p=[self.propType,r,"sources"],m=e(self.droppedElements,p),v=a(m);if(v>1)for(var h in m)if(m.hasOwnProperty(h)){var f=m[h],b=$(f).find("li");$(b).each(i)}}function i(e,n){var t=$("<div></div>").html("Are you sure you want to delete cohort &quot;"+e.trim()+"&quot;? You cannot undo this action.").dialog({title:"Delete Data Element",modal:!0,resizable:!1,buttons:{Delete:function(){$.ajax({type:"POST",url:"deletecohort?key="+encodeURIComponent(n),success:function(e){$(this).dialog("close"),window.location.href="editorhome"},error:function(e,n){var a=$("<div></div>").html(e.responseText).dialog({title:"Error Deleting Data Element",buttons:{OK:function(){$(this).dialog("close")}},close:function(){t.dialog("close")}});a.dialog("open")}})},Cancel:function(){$(this).dialog("close")}},close:function(){}});t.dialog("open")}function r(n,o){function i(e,t){var a=$(t).find("span.desc"),o=$(n).data("desc");$(a).text(o)}var r=$(n).data("key"),s=$(o).data("count"),d=[self.propType,r,"sources",s];t(self.droppedElements,d);var l=[self.propType,r,"sources"],c=e(self.droppedElements,l),u=a(c);if(1>=u)for(var p in c)if(c.hasOwnProperty(p)){var m=c[p],v=$(m).find("li");$(v).each(i)}}function s(e,n,t){var a=n.siblings("div.label-info"),o=n.parent();r(e,n),c(n.closest('[data-definition-container="true"]')),e.remove(),0===n.find("li").length&&0===t&&(n.data("proptype","empty"),a.show()),$("select[data-properties-provider="+$(o).attr("id")+"]").each(function(e,n){$(n).empty()});var i=$(o).parent().parent().parent(),s=$(i).find("input.propertyValueField");$(s).removeAttr("disabled");var d=$(i).find("input.propertyValueConstraint");$(d).removeAttr("disabled"),self.deleteActions&&self.deleteActions[self.propType]&&self.deleteActions[self.propType]()}function d(e,n){var t=!0;return $(e).find("ul.sortable").find("li").each(function(e,a){$(a).data("key")===n&&(t=!1)}),t}function l(e,n,t){var a=$(n).parent();$(a).find("div.label-info").hide();var i=$("<span></span>",{"class":"glyphicon glyphicon-remove delete-icon","data-action":"remove"});u(i);var r=e.data.origin.get_node(e.data.obj[0].id).original.text;if(t.append(i),t.append(r),n.append(t),$(e.data.obj[0]).data("properties")){var s=$(e.data.obj[0]).data("properties").split(",");$("select[data-properties-provider="+$(a).attr("id")+"]").each(function(e,n){$(n).empty(),$(s).each(function(e,t){$(n).append($("<option></option>").attr("value",t).text(t))})})}else{var d=$(a).closest(".form-group").parent(),l=$(d).find("input.propertyValueField");$(l).attr("disabled","disabled");var p=$(d).find("input.propertyValueConstraint");$(p).attr("disabled","disabled")}o(t,n),c($(n).closest('[data-definition-container="true"]')),self.dndActions&&self.dndActions[self.propType]&&self.dndActions[self.propType](e.data.obj[0])}function c(e){var n=self.droppedElements[self.propType];if(null!==n){var t=$(e).find('select[name="propositionSelect"]');$(t).each(function(e,t){var a=$(t).closest(".drop-parent").find("ul.sortable"),o=$(t).data("sourceid");$(t).attr("data-sourceid",""),$(t).empty(),$.each(n,function(e,i){var r=n[e].sources;$.each(r,function(n,i){var s,d=$(i).find("li");d.each(function(d,l){if($(l).data("key")===e&&(s=l),s&&a.data("count")!==$(i).data("count")){var c=$(i).data("count"),u=$(s).data("key")+"__"+c,p=$(s).data("desc");self.objSize(r)>1&&(p+=" ["+n+"]");var m=$("<option></option>",{value:u}).text(p);u===$(s).data("key")+"__"+o&&m.attr("selected","selected"),$(t).append(m)}})})})})}}function u(e){$(e).each(function(e,n){$(n).click(function(){var e=$(n).closest("li"),t=e.closest("ul.sortable"),a=$("#deleteModal");$(a).find("#deleteContent").html("Are you sure you want to remove data element &quot;"+e.text().trim()+"&quot;?"),$(a).find("#deleteButton").on("click",function(n){s(e,t,0),$(a).modal("hide")}),$(a).modal("show")})})}return{getIn:e,setIn:n,removeIn:t,objSize:a,addDroppedElement:o,deleteElement:i,deleteItem:s,removeDroppedElement:r,addNewItemToList:l,idIsNotInList:d,setPropositionSelects:c,attachDeleteAction:u}}angular.module("eureka").factory("listDragAndDropService",e),e.$inject=[]}();var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}();!function(){function e(e,t,a){function o(n){return e.get(r+"/role/"+n).then(function(e){return e.data},function(e){return console.error("role retrieval failed:",e),e})}function i(){return e.get(r+"/users/me",{transformResponse:function(e){try{var n=JSON.parse(e);return n}catch(t){console.log("User is not logged in!")}}}).then(function(e){var a=e.data;return a?t.all(_.map(a.roles,o)).then(function(e){return a.roles=e,console.log("user info!",a),new n(a)}):t.when(null)},function(e){console.error("error getting user:",e)})}var r=a.apiEndpoint;return{getUser:i,getRole:o}}angular.module("eureka").factory("users",e),e.$inject=["$http","$q","appProperties"];var n=function(){function e(n){_classCallCheck(this,e),this.info=n}return _createClass(e,[{key:"hasRole",value:function(e){var n=this.info.roles;return n.some(function(n){return n.name===e})}},{key:"getFullName",value:function(){var e=this.info,n=e.fullName,t=e.firstName,a=e.lastName;return n||t+" "+a}}]),e}()}(),function(){function e(e,n){function t(){var n="COHORT";return e.get("/eureka-services/api/protected/destinations?type="+n).then(s,d)}function a(n){return e["delete"]("/eureka-webapp/proxy-resource/destinations/"+n).then(s,d)}function o(n){return e.get("/eureka-services/api/protected/systemelement/"+n+"?summary=true").then(s,d)}function i(n){return e.get("/eureka-services/api/protected/destinations/"+n).then(s,d)}function r(t){function a(e){void 0!==e.left_node&&a(e.left_node),void 0!==e.name&&o.push(e.name),void 0!==e.right_node&&a(e.right_node)}var o=[];a(t.node);var i=[];return angular.forEach(o,function(n){var t=e.get("/eureka-services/api/protected/systemelement/"+n+"?summary=true");i.push(t)}),n.all(i)}function s(e){return e.data}function d(e){return angular.isObject(e.data)||e.data?n.reject(e.data):n.reject("An unknown error occurred.")}return{getCohorts:t,getCohort:i,getSystemElement:o,getPhenotypes:r,removeCohort:a}}angular.module("eureka.cohorts").factory("CohortService",e),e.$inject=["$http","$q"]}(),function(){function e(e,n,t){function a(n){return e.get(t.dataEndpoint+"/systemlist",{cache:!0,params:{key:n}}).then(o,i)}function o(e){return e.data}function i(e){return angular.isObject(e.data)||e.data?n.reject(e.data):n.reject("An unknown error occurred.")}return{getTreeData:a}}angular.module("eureka.cohorts").factory("CohortTreeService",e),e.$inject=["$http","$q","appProperties"]}(),function(){function e(e,n){function t(){return e.get("/eureka-services/api/protected/dataelement?summarize=true").then(a,o)}function a(e){return e.data}function o(e){return angular.isObject(e.data)||e.data?n.reject(e.data):n.reject("An unknown error occurred.")}return{getSummarizedUserElements:t}}angular.module("eureka.phenotypes").factory("PhenotypeService",e),e.$inject=["$http","$q"]}(),function(){function e(e,n){function t(n){return n.username=n.email,n.fullName=n.firstName+" "+n.lastName,n.type="LOCAL",n.loginType="INTERNAL",e.post("/eureka-services/api/userrequest/new",n).then(a,o)}function a(e){return e.data}function o(e){return angular.isObject(e.data)||e.data?n.reject(e.data):n.reject("An unknown error occurred.")}return{addNewAccount:t}}angular.module("eureka.register").factory("RegisterService"),e.$inject=["$http","$q"]}(),function(){function e(e,n){function t(n){e.getPhenotypes(n.cohort).then(function(e){for(var t=[],a=0;a<e.length;a++)t.push(new Object({dataElementKey:e[a].data.key,dataElementDisplayName:e[a].data.displayName,type:"SYSTEM"}));o.destination.phenotypes=t,eureka.editor.setup(null!==n.id?n.id:null,"#userTree","#definitionContainer","#savePropositionButton")})}function a(e){o.errorMsg=e}var o=this;n.key&&e.getCohort(n.key).then(function(e){o.destination=e,t(e)},a)}angular.module("eureka.cohorts").controller("cohorts.EditCtrl",e),e.$inject=["CohortService","$stateParams"]}(),function(){function e(e){function n(){e.getCohorts().then(function(e){o.list=e},a)}function t(n){e.removeCohort(n);for(var t=0;t<o.list.length;t++)if(o.list[t].name===n){o.list.splice(t,1);break}}function a(e){o.errorMsg=e}var o=this;o.remove=t,n()}angular.module("eureka.cohorts").controller("cohorts.MainCtrl",e),e.$inject=["CohortService"]}(),function(){function e(e,n){function t(){i.loading=!0,r("root").then(function(e){console.log(e),i.dummyTreeData=e,delete i.loading},a)}function a(e){i.errorMsg=e}function o(e){e.nodes||(e.loading=!0,r(e.attr.id).then(function(n){console.log(n),e.nodes=n,delete e.loading},a))}var i=this,r=n.getTreeData;i.toggleNode=o,t()}angular.module("eureka.cohorts").controller("cohorts.NewCtrl",e),e.$inject=["CohortService","CohortTreeService"]}(),function(){function e(e,n,t,a){return{scope:{item:"=phenotypeEditor"},replace:!0,restrict:"EA",templateUrl:"eureka/phenotypes/directives/phenotype-editor/phenotype-editor.html",link:function(e,n,o,i,r){e.$watch("$last",function(e){var o=function(){$("ul.sortable").each(function(e,n){$(n).find("li").each(function(e,t){a.addDroppedElement(t,$(n))}),$("span.delete-icon").each(function(e,n){$(n).click(function(){var e=$(n).closest("li"),t=e.closest("ul.sortable"),o=$("#deleteModal");$(o).find("#deleteContent").html("Are you sure you want to remove data element &quot;"+e.text().trim()+"&quot;?"),$(o).find("#deleteButton").on("click",function(n){a.deleteItem(e,t,0),$(o).modal("hide")}),$(o).modal("show")})})});var e=n.parent();e.is("div")&&e.append($("<ul></ul>").attr("data-drop-type","multiple").attr("data-proptype","empty").addClass("sortable").append(n.parent().children()))};t(o,0)})}}}angular.module("eureka.phenotypes").directive("phenotypeEditor",e),e.$inject=["$http","$templateCache","$timeout","listDragAndDropService"]}(),function(){function e(e,n,t){function a(e){o.errorMsg=e}var o=this,i={CATEGORIZATION:{displayName:"Category",description:"For defining a significant category of codes or clinical events or observations."},TEMPORAL:{displayName:"Temporal",description:"For defining a disease, finding or patient care process to be reflected by codes,\n                clinical events and/or observations in a specified frequency, sequential or other temporal patterns."},SEQUENCE:{displayName:"Sequence",description:"For defining a disease, finding or patient care process to be reflected by codes,\n                clinical events and/or observations in a specified sequential temporal pattern."},FREQUENCY:{displayName:"Frequency",description:"For defining a disease, finding or patient care process to be reflected by codes,\n                clinical events and/or observations in a specified frequency."},VALUE_THRESHOLD:{displayName:"Value Threshold",description:"For defining clinically significant thresholds on the value of an observation."}};o.messages=i,n.getSummarizedUserElements().then(function(e){o.props=e},a)}angular.module("eureka.phenotypes").controller("phenotypes.MainCtrl"),e.$inject=["$scope","PhenotypeService","$location"]}(),function(){function e(e,n){function t(n){e.addNewAccount(n).then(a,o)}function a(e){i.showSuccess=!0}function o(e){i.errorMsg=e}var i=this;i.addNewAccount=t}angular.module("eureka.register").controller("register.MainCtrl",e),e.$inject=["RegisterService","$location"]}();